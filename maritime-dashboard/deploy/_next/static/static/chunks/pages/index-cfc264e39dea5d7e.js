(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(7418)}])},7418:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return Home}});var a=t(5893),l=t(7294),i=t(422),n=t(9461),r=t(4976),c=t(5231),d=t(9062),o=t(3756),m=t(1853),x=t(9858),h=t(5077);let MaritimeWebSocketService=class MaritimeWebSocketService{connect(){return new Promise((e,s)=>{try{this.ws=new WebSocket(this.config.url),this.ws.onopen=()=>{console.log("Maritime WebSocket connected"),this.reconnectAttempts=0,e()},this.ws.onmessage=e=>{try{let s=JSON.parse(e.data);this.notifyListeners(s.type,s)}catch(e){console.error("Failed to parse WebSocket message:",e)}},this.ws.onclose=()=>{console.log("Maritime WebSocket disconnected"),this.config.autoReconnect&&this.reconnectAttempts<this.config.maxReconnectAttempts&&this.scheduleReconnect()},this.ws.onerror=e=>{console.error("Maritime WebSocket error:",e),s(e)}}catch(e){s(e)}})}scheduleReconnect(){this.reconnectTimer=setTimeout(()=>{this.reconnectAttempts++,console.log("Attempting to reconnect (".concat(this.reconnectAttempts,"/").concat(this.config.maxReconnectAttempts,")")),this.connect().catch(console.error)},this.config.reconnectInterval)}subscribe(e,s){this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(s)}unsubscribe(e,s){let t=this.listeners.get(e);if(t){let e=t.indexOf(s);e>-1&&t.splice(e,1)}}notifyListeners(e,s){let t=this.listeners.get(e);t&&t.forEach(e=>e(s))}disconnect(){this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.ws&&(this.ws.close(),this.ws=null),this.listeners.clear()}send(e){this.ws&&this.ws.readyState===WebSocket.OPEN&&this.ws.send(JSON.stringify(e))}constructor(e){this.ws=null,this.listeners=new Map,this.reconnectAttempts=0,this.reconnectTimer=null,this.config=e}};let useRealTimeData=e=>{let[s,t]=(0,l.useState)(new Map),[a,i]=(0,l.useState)(!1),n=(0,l.useRef)(null);return(0,l.useEffect)(()=>(n.current=new MaritimeWebSocketService({url:"wss://maritime-platform.icystone-47eb4b00.norwayeast.azurecontainerapps.io/ws",autoReconnect:!0,reconnectInterval:5e3,maxReconnectAttempts:10}),n.current.connect().then(()=>{i(!0),e.forEach(e=>{n.current.subscribe(e,s=>{t(t=>{let a=new Map(t),l=a.get(e)||[],i=[...l,s].slice(-100);return a.set(e,i),a})})})}).catch(()=>i(!1)),()=>{n.current&&n.current.disconnect()}),[]),{data:s,isConnected:a,wsService:n.current}},useRealTimeVesselData=()=>useRealTimeData(["vessel","ais"]);let RealTimeAnalyticsService=class RealTimeAnalyticsService{initializeWorker(){let e=new Blob(["\n      // Analytics computations in web worker\n      self.onmessage = function(e) {\n        const { type, data } = e.data\n        \n        switch(type) {\n          case 'calculateTrends':\n            const trends = calculateTrends(data)\n            self.postMessage({ type: 'trends', result: trends })\n            break\n            \n          case 'predictFuelConsumption':\n            const predictions = predictFuelConsumption(data)\n            self.postMessage({ type: 'predictions', result: predictions })\n            break\n            \n          case 'calculateKPIs':\n            const kpis = calculateKPIs(data)\n            self.postMessage({ type: 'kpis', result: kpis })\n            break\n        }\n      }\n      \n      function calculateTrends(data) {\n        // Implement trend analysis algorithms\n        return data.map(series => {\n          if (series.length < 2) return { trend: 'stable', change: 0 }\n          \n          const recent = series.slice(-10)\n          const older = series.slice(-20, -10)\n          \n          const recentAvg = recent.reduce((sum, point) => sum + point.value, 0) / recent.length\n          const olderAvg = older.reduce((sum, point) => sum + point.value, 0) / older.length\n          \n          const change = ((recentAvg - olderAvg) / olderAvg) * 100\n          const trend = Math.abs(change) < 2 ? 'stable' : change > 0 ? 'up' : 'down'\n          \n          return { trend, change: Math.round(change * 100) / 100 }\n        })\n      }\n      \n      function predictFuelConsumption(data) {\n        // Simple linear regression for fuel consumption prediction\n        if (data.length < 5) return []\n        \n        const predictions = []\n        const recent = data.slice(-24) // Last 24 hours\n        \n        // Calculate moving average trend\n        for (let i = 0; i < 12; i++) {\n          const trend = recent.reduce((sum, point, index) => {\n            return sum + point.value * (index + 1) / recent.length\n          }, 0)\n          \n          predictions.push(Math.max(0, trend + (Math.random() - 0.5) * trend * 0.1))\n        }\n        \n        return predictions\n      }\n      \n      function calculateKPIs(data) {\n        // Calculate maritime KPIs\n        const fuelData = data.fuel || []\n        const emissionData = data.emissions || []\n        const routeData = data.routes || []\n        \n        return {\n          fuelEfficiency: fuelData.length > 0 \n            ? Math.round((fuelData.reduce((sum, p) => sum + p.value, 0) / fuelData.length) * 100) / 100\n            : 0,\n          emissionReduction: emissionData.length > 0\n            ? Math.round(Math.max(0, 100 - (emissionData.slice(-1)[0]?.value || 100)))\n            : 0,\n          onTimePerformance: routeData.length > 0\n            ? Math.round((routeData.filter(r => r.metadata?.onTime).length / routeData.length) * 100)\n            : 0,\n          passengerSatisfaction: Math.round(85 + Math.random() * 10) // Simulated for now\n        }\n      }\n    "],{type:"application/javascript"});this.analyticsWorker=new Worker(URL.createObjectURL(e))}processRealTimeData(e){let s="".concat(e.type,"_").concat(e.vesselId);this.dataBuffer.has(s)||this.dataBuffer.set(s,[]);let t=this.dataBuffer.get(s);t.push({timestamp:e.timestamp,value:this.extractNumericValue(e.data),metadata:e.data}),t.length>this.maxBufferSize&&t.splice(0,t.length-this.maxBufferSize)}extractNumericValue(e){return"number"==typeof e?e:void 0!==e.value?e.value:void 0!==e.fuelConsumption?e.fuelConsumption:void 0!==e.co2Level?e.co2Level:void 0!==e.speed?e.speed:0}async getAnalytics(e){let s={};return e.forEach(e=>{let t=Array.from(this.dataBuffer.keys()).filter(s=>s.startsWith(e)).map(e=>this.dataBuffer.get(e)).flat().sort((e,s)=>new Date(e.timestamp).getTime()-new Date(s.timestamp).getTime());s[e]=t}),new Promise(e=>{if(this.analyticsWorker){let messageHandler=s=>{"complete_analytics"===s.data.type&&(this.analyticsWorker.removeEventListener("message",messageHandler),e(s.data.result))};this.analyticsWorker.addEventListener("message",messageHandler),this.analyticsWorker.postMessage({type:"complete_analytics",data:s})}else e(this.calculateAnalyticsSync(s))})}calculateAnalyticsSync(e){let s={fuelEfficiency:this.calculateAverage(e.fuel||[]),emissionReduction:Math.max(0,100-this.calculateAverage(e.environmental||[])),onTimePerformance:94.2,passengerSatisfaction:87.5},t=[{name:"Fuel Efficiency",value:s.fuelEfficiency,change:2.3,trend:"up"},{name:"COâ‚‚ Emissions",value:100-s.emissionReduction,change:-1.8,trend:"down"},{name:"Route Optimization",value:s.onTimePerformance,change:.5,trend:"stable"}],a={fuelConsumption:this.generatePredictions(e.fuel||[],12),co2Emissions:this.generatePredictions(e.environmental||[],12),routeOptimization:this.generatePredictions(e.route||[],12)};return{kpis:s,trends:t,predictions:a}}calculateAverage(e){return 0===e.length?0:e.reduce((e,s)=>e+s.value,0)/e.length}generatePredictions(e,s){if(0===e.length)return Array(s).fill(0);let t=e.slice(-10),a=this.calculateAverage(t),l=t.length>1?(t[t.length-1].value-t[0].value)/t.length:0;return Array.from({length:s},(e,s)=>Math.max(0,a+l*(s+1)+(Math.random()-.5)*a*.1))}getTimeSeriesData(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24,t=new Date(Date.now()-36e5*s);return Array.from(this.dataBuffer.keys()).filter(s=>s.startsWith(e)).map(e=>this.dataBuffer.get(e)).flat().filter(e=>new Date(e.timestamp)>=t).sort((e,s)=>new Date(e.timestamp).getTime()-new Date(s.timestamp).getTime())}dispose(){this.analyticsWorker&&this.analyticsWorker.terminate(),this.dataBuffer.clear()}constructor(){this.dataBuffer=new Map,this.maxBufferSize=1e3,this.analyticsWorker=null,window.Worker&&this.initializeWorker()}};let u=new RealTimeAnalyticsService;function FleetDashboard(){let[e,s]=(0,l.useState)(null),[t,n]=(0,l.useState)(!0),[c,d]=(0,l.useState)({totalDistance:0,averageSpeed:0,fuelEfficiency:0,activeVessels:0}),{data:o,isConnected:m}=useRealTimeVesselData();(0,l.useEffect)(()=>{fetchFleetData();let e=setInterval(fetchFleetData,6e4);return()=>clearInterval(e)},[]),(0,l.useEffect)(()=>{if(o.size>0){let e=o.get("vessel")||[],s=o.get("ais")||[];e.forEach(e=>u.processRealTimeData(e)),s.forEach(e=>u.processRealTimeData(e)),updateRealTimeMetrics(e,s)}},[o]);let updateRealTimeMetrics=(e,s)=>{let t=new Set(e.map(e=>e.vesselId)).size,a=e.reduce((e,s)=>e+(s.data.distanceTraveled||0),0),l=e.length>0?e.reduce((e,s)=>e+(s.data.speed||0),0)/e.length:0,i=e.length>0?e.reduce((e,s)=>e+(s.data.fuelEfficiency||85),0)/e.length:85;d({totalDistance:Math.round(100*a)/100,averageSpeed:Math.round(100*l)/100,fuelEfficiency:Math.round(100*i)/100,activeVessels:t})},fetchFleetData=async()=>{try{let e=await fetch("".concat("https://maritime-platform.icystone-47eb4b00.norwayeast.azurecontainerapps.io","/api/vessel")),t=await e.json();s(t),n(!1)}catch(e){console.error("Failed to fetch fleet data:",e),n(!1)}},getStatusColor=e=>{switch(e){case 0:return"bg-green-500";case 1:return"bg-yellow-500";case 2:return"bg-red-500";default:return"bg-gray-500"}},getStatusText=e=>{switch(e){case 0:return"Operational";case 1:return"In Port";case 2:return"Maintenance";default:return"Unknown"}};return t?(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-havila-blue"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsx)("div",{className:"metric-card",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(i.Z,{className:"h-8 w-8 text-havila-blue mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-white",children:(null==e?void 0:e.totalVessels)||0}),(0,a.jsx)("p",{className:"text-slate-400",children:"Total Vessels"})]})]})}),(0,a.jsx)("div",{className:"metric-card",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(r.Z,{className:"h-8 w-8 text-green-500 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-white",children:"4"}),(0,a.jsx)("p",{className:"text-slate-400",children:"Active Routes"})]})]})}),(0,a.jsx)("div",{className:"metric-card",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(x.Z,{className:"h-8 w-8 text-blue-500 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-white",children:"2,560"}),(0,a.jsx)("p",{className:"text-slate-400",children:"Passengers Today"})]})]})}),(0,a.jsx)("div",{className:"metric-card",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(h.Z,{className:"h-8 w-8 text-yellow-500 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-white",children:"98.5%"}),(0,a.jsx)("p",{className:"text-slate-400",children:"On-Time Performance"})]})]})})]}),(0,a.jsxs)("div",{className:"dashboard-card",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-white mb-6",children:"Fleet Status"}),(0,a.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:null==e?void 0:e.vessels.map(e=>(0,a.jsxs)("div",{className:"bg-slate-700 rounded-lg p-4 border border-slate-600",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:e.name}),(0,a.jsxs)("p",{className:"text-slate-400",children:["IMO: ",e.imoNumber," | Call Sign: ",e.callSign]})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(getStatusColor(e.status)," mr-2")}),(0,a.jsx)("span",{className:"text-sm text-slate-300",children:getStatusText(e.status)})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-slate-400",children:"Capacity"}),(0,a.jsxs)("p",{className:"text-white font-medium",children:[e.passengerCapacity," passengers"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-slate-400",children:"Last Updated"}),(0,a.jsx)("p",{className:"text-white font-medium",children:new Date(e.lastUpdated).toLocaleTimeString()})]})]}),(0,a.jsx)("div",{className:"mt-4 pt-4 border-t border-slate-600",children:(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-slate-400",children:"Speed"}),(0,a.jsxs)("p",{className:"text-white font-bold",children:[Math.floor(15*Math.random())+8," kn"]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-slate-400",children:"Position"}),(0,a.jsxs)("p",{className:"text-white font-bold",children:[(60+10*Math.random()).toFixed(2),"\xb0N"]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-slate-400",children:"ETA"}),(0,a.jsxs)("p",{className:"text-white font-bold",children:[Math.floor(8*Math.random())+1,"h"]})]})]})})]},e.id))})]}),(0,a.jsxs)("div",{className:"dashboard-card",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-white mb-6",children:"Current Routes"}),(0,a.jsxs)("div",{className:"text-center text-slate-400 py-8",children:[(0,a.jsx)(r.Z,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,a.jsx)("p",{children:"Interactive route map will be displayed here"}),(0,a.jsx)("p",{className:"text-sm mt-2",children:"Bergen â†” Kirkenes Coastal Route"})]})]})]})}var j=t(2027),p=t(443),f=t(3587);function SystemHealth(e){var s,t,l,i,r,c,x,h,u;let{systemStatus:g}=e;if(!g)return(0,a.jsx)("div",{className:"dashboard-card",children:(0,a.jsx)("p",{className:"text-slate-400",children:"Loading system health data..."})});let getStatusIcon=e=>{switch(e.toLowerCase()){case"healthy":case"available":return(0,a.jsx)(o.Z,{className:"h-5 w-5 text-green-500"});case"warning":return(0,a.jsx)(m.Z,{className:"h-5 w-5 text-yellow-500"});case"error":case"unhealthy":return(0,a.jsx)(j.Z,{className:"h-5 w-5 text-red-500"});default:return(0,a.jsx)(d.Z,{className:"h-5 w-5 text-gray-500"})}},getStatusColor=e=>{switch(e.toLowerCase()){case"healthy":case"available":return"text-green-400";case"warning":return"text-yellow-400";case"error":case"unhealthy":return"text-red-400";default:return"text-gray-400"}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"dashboard-card",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-white",children:"System Overview"}),(0,a.jsxs)("div",{className:"flex items-center",children:[getStatusIcon(g.overallStatus),(0,a.jsx)("span",{className:"ml-2 font-medium ".concat(getStatusColor(g.overallStatus)),children:g.overallStatus})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsx)("div",{className:"metric-card",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(d.Z,{className:"h-8 w-8 text-blue-500 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-2xl font-bold text-white",children:[(null===(t=g.performance)||void 0===t?void 0:null===(s=t.cpuUsage)||void 0===s?void 0:s.toFixed(1))||"N/A","%"]}),(0,a.jsx)("p",{className:"text-slate-400",children:"CPU Usage"})]})]})}),(0,a.jsx)("div",{className:"metric-card",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(p.Z,{className:"h-8 w-8 text-purple-500 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-2xl font-bold text-white",children:[(null===(i=g.performance)||void 0===i?void 0:null===(l=i.memoryUsage)||void 0===l?void 0:l.toFixed(1))||"N/A","%"]}),(0,a.jsx)("p",{className:"text-slate-400",children:"Memory Usage"})]})]})}),(0,a.jsx)("div",{className:"metric-card",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(n.Z,{className:"h-8 w-8 text-yellow-500 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-white",children:(null===(r=g.performance)||void 0===r?void 0:r.requestsPerSecond)||"N/A"}),(0,a.jsx)("p",{className:"text-slate-400",children:"Requests/sec"})]})]})}),(0,a.jsx)("div",{className:"metric-card",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(f.Z,{className:"h-8 w-8 text-green-500 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-white",children:(null===(c=g.performance)||void 0===c?void 0:c.activeConnections)||"N/A"}),(0,a.jsx)("p",{className:"text-slate-400",children:"Active Connections"})]})]})})]})]}),(0,a.jsxs)("div",{className:"dashboard-card",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-6",children:"Service Health"}),(0,a.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:null===(x=g.services)||void 0===x?void 0:x.map((e,s)=>(0,a.jsxs)("div",{className:"bg-slate-700 rounded-lg p-4 border border-slate-600",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h4",{className:"font-semibold text-white",children:e.serviceName}),(0,a.jsxs)("div",{className:"flex items-center",children:[getStatusIcon(e.status),(0,a.jsx)("span",{className:"ml-2 text-sm ".concat(getStatusColor(e.status)),children:e.status})]})]}),(0,a.jsx)("p",{className:"text-slate-400 text-sm mb-2",children:e.details}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-slate-500",children:"Response Time"}),(0,a.jsx)("p",{className:"text-white",children:e.responseTime||"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-slate-500",children:"Version"}),(0,a.jsx)("p",{className:"text-white",children:e.version||"N/A"})]})]})]},s))})]}),(0,a.jsxs)("div",{className:"dashboard-card",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-6",children:"External Dependencies"}),(0,a.jsx)("div",{className:"space-y-3",children:null===(h=g.dependencies)||void 0===h?void 0:h.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-700 rounded-lg border border-slate-600",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[getStatusIcon(e.status),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("p",{className:"text-white font-medium",children:e.name}),(0,a.jsx)("p",{className:"text-slate-400 text-sm",children:e.endpoint})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm font-medium ".concat(getStatusColor(e.status)),children:e.status}),(0,a.jsx)("p",{className:"text-slate-400 text-xs",children:e.responseTime||"N/A"})]})]},s))})]}),g.infrastructure&&(0,a.jsxs)("div",{className:"dashboard-card",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-6",children:"Infrastructure Status"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[g.infrastructure.containerAppsEnvironment&&(0,a.jsxs)("div",{className:"bg-slate-700 rounded-lg p-4 border border-slate-600",children:[(0,a.jsx)("h4",{className:"font-semibold text-white mb-3",children:"Container Apps Environment"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-slate-400",children:"Name:"}),(0,a.jsx)("span",{className:"text-white",children:g.infrastructure.containerAppsEnvironment.name})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-slate-400",children:"Status:"}),(0,a.jsx)("span",{className:"text-green-400",children:g.infrastructure.containerAppsEnvironment.status})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-slate-400",children:"Active Replicas:"}),(0,a.jsx)("span",{className:"text-white",children:g.infrastructure.containerAppsEnvironment.activeReplicas})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-slate-400",children:"CPU Utilization:"}),(0,a.jsxs)("span",{className:"text-white",children:[g.infrastructure.containerAppsEnvironment.cpuUtilization,"%"]})]})]})]}),g.infrastructure.loadBalancer&&(0,a.jsxs)("div",{className:"bg-slate-700 rounded-lg p-4 border border-slate-600",children:[(0,a.jsx)("h4",{className:"font-semibold text-white mb-3",children:"Load Balancer"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-slate-400",children:"Status:"}),(0,a.jsx)("span",{className:"text-green-400",children:g.infrastructure.loadBalancer.status})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-slate-400",children:"Active Backends:"}),(0,a.jsxs)("span",{className:"text-white",children:[g.infrastructure.loadBalancer.activeBackends,"/",g.infrastructure.loadBalancer.totalBackends]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-slate-400",children:"Requests/min:"}),(0,a.jsx)("span",{className:"text-white",children:null===(u=g.infrastructure.loadBalancer.requestsPerMinute)||void 0===u?void 0:u.toLocaleString()})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-slate-400",children:"Failed Health Checks:"}),(0,a.jsx)("span",{className:"text-white",children:g.infrastructure.loadBalancer.failedHealthChecks})]})]})]})]})]})]})}var g=t(5951),v=t(9009),N=t(8687),b=t(4195),w=t(3023),y=t(5358),S=t(6050),T=t(6880),A=t(4831),k=t(483);function EnvironmentalMonitoring(){let[e,s]=(0,l.useState)([]),[t,i]=(0,l.useState)({co2Today:0,co2Limit:1500,noxLevel:0,noxLimit:20,batteryMode:0,hybridEfficiency:0}),[r,d]=(0,l.useState)(!0),fetchEnvironmentalData=async()=>{try{let e="https://maritime-platform.icystone-47eb4b00.norwayeast.azurecontainerapps.io",t=await fetch("".concat(e,"/api/environmental")),a=await t.json(),l=await fetch("".concat(e,"/api/iot")),n=await l.json(),r=processEnvironmentalData(a,n);s(r.timeSeriesData),i(r.currentMetrics),d(!1)}catch(e){console.error("Failed to fetch environmental data:",e),s([]),i({co2Today:1240,co2Limit:1500,noxLevel:15.2,noxLimit:20,batteryMode:67,hybridEfficiency:92}),d(!1)}},processEnvironmentalData=(e,s)=>{var t,a,l;let i=new Date,n=[];for(let e=23;e>=0;e--){let s=new Date(i.getTime()-36e5*e);n.push({time:s.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),co2:Math.floor(200*Math.random())+800,nox:Math.floor(10*Math.random())+15,batteryUsage:Math.floor(40*Math.random())+30,fuelEfficiency:Math.floor(15*Math.random())+85})}let r={co2Today:n.reduce((e,s)=>e+s.co2,0)/n.length,co2Limit:1500,noxLevel:(null===(t=n[n.length-1])||void 0===t?void 0:t.nox)||0,noxLimit:20,batteryMode:(null===(a=n[n.length-1])||void 0===a?void 0:a.batteryUsage)||0,hybridEfficiency:(null===(l=n[n.length-1])||void 0===l?void 0:l.fuelEfficiency)||0};return{timeSeriesData:n,currentMetrics:r}};(0,l.useEffect)(()=>{fetchEnvironmentalData();let e=setInterval(fetchEnvironmentalData,3e4);return()=>clearInterval(e)},[]);let getComplianceStatus=(e,s)=>{let t=e/s*100;return t<70?{status:"Excellent",color:"text-green-500",bg:"bg-green-500/20"}:t<85?{status:"Good",color:"text-blue-500",bg:"bg-blue-500/20"}:t<95?{status:"Caution",color:"text-yellow-500",bg:"bg-yellow-500/20"}:{status:"Critical",color:"text-red-500",bg:"bg-red-500/20"}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsx)("div",{className:"metric-card",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-white",children:t.co2Today}),(0,a.jsx)("p",{className:"text-slate-400",children:"COâ‚‚ Emissions (tons)"}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("div",{className:"w-full bg-slate-700 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-500",style:{width:"".concat(t.co2Today/t.co2Limit*100,"%")}})}),(0,a.jsxs)("p",{className:"text-xs text-slate-400 mt-1",children:[t.co2Limit-t.co2Today," tons remaining"]})]})]}),(0,a.jsx)(c.Z,{className:"h-8 w-8 text-blue-500"})]})}),(0,a.jsx)("div",{className:"metric-card",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-white",children:t.noxLevel}),(0,a.jsx)("p",{className:"text-slate-400",children:"NOx Levels (ppm)"}),(0,a.jsx)("div",{className:"mt-2 px-2 py-1 rounded-full text-xs ".concat(getComplianceStatus(t.noxLevel,t.noxLimit).bg," ").concat(getComplianceStatus(t.noxLevel,t.noxLimit).color),children:getComplianceStatus(t.noxLevel,t.noxLimit).status})]}),(0,a.jsx)(g.Z,{className:"h-8 w-8 text-gray-400"})]})}),(0,a.jsx)("div",{className:"metric-card",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-2xl font-bold text-white",children:[t.batteryMode,"%"]}),(0,a.jsx)("p",{className:"text-slate-400",children:"Battery Mode"}),(0,a.jsxs)("div",{className:"flex items-center mt-2",children:[(0,a.jsx)(n.Z,{className:"h-4 w-4 text-yellow-500 mr-1"}),(0,a.jsx)("span",{className:"text-sm text-green-400",children:"Hybrid Active"})]})]}),(0,a.jsx)(n.Z,{className:"h-8 w-8 text-yellow-500"})]})}),(0,a.jsx)("div",{className:"metric-card",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-2xl font-bold text-white",children:[t.hybridEfficiency,"%"]}),(0,a.jsx)("p",{className:"text-slate-400",children:"Efficiency Rating"}),(0,a.jsxs)("div",{className:"flex items-center mt-2",children:[(0,a.jsx)(x.Z,{className:"h-4 w-4 text-green-500 mr-1"}),(0,a.jsx)("span",{className:"text-sm text-green-400",children:"+5% from yesterday"})]})]}),(0,a.jsx)(x.Z,{className:"h-8 w-8 text-green-500"})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"dashboard-card",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"COâ‚‚ Emissions (24h)"}),(0,a.jsx)(v.h,{width:"100%",height:300,children:(0,a.jsxs)(N.w,{data:e,children:[(0,a.jsx)(b.q,{strokeDasharray:"3 3",stroke:"#374151"}),(0,a.jsx)(w.K,{dataKey:"time",stroke:"#9CA3AF"}),(0,a.jsx)(y.B,{stroke:"#9CA3AF"}),(0,a.jsx)(S.u,{contentStyle:{backgroundColor:"#1F2937",border:"1px solid #374151",borderRadius:"8px"}}),(0,a.jsx)(T.x,{type:"monotone",dataKey:"co2",stroke:"#EF4444",strokeWidth:2,dot:{fill:"#EF4444",strokeWidth:2}})]})})]}),(0,a.jsxs)("div",{className:"dashboard-card",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Battery Usage (24h)"}),(0,a.jsx)(v.h,{width:"100%",height:300,children:(0,a.jsxs)(A.v,{data:e,children:[(0,a.jsx)(b.q,{strokeDasharray:"3 3",stroke:"#374151"}),(0,a.jsx)(w.K,{dataKey:"time",stroke:"#9CA3AF"}),(0,a.jsx)(y.B,{stroke:"#9CA3AF"}),(0,a.jsx)(S.u,{contentStyle:{backgroundColor:"#1F2937",border:"1px solid #374151",borderRadius:"8px"}}),(0,a.jsx)(k.$,{dataKey:"batteryUsage",fill:"#EAB308"})]})})]})]}),(0,a.jsxs)("div",{className:"dashboard-card",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-6",children:"Environmental Compliance Status"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"bg-slate-700 rounded-lg p-4 border border-slate-600",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h4",{className:"font-semibold text-white",children:"HTTPS Enforcement"}),(0,a.jsxs)("div",{className:"flex items-center text-green-400",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full mr-2"}),"Compliant"]})]}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:"All endpoints enforce HTTPS security"})]}),(0,a.jsxs)("div",{className:"bg-slate-700 rounded-lg p-4 border border-slate-600",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h4",{className:"font-semibold text-white",children:"IMO 2020 Regulations"}),(0,a.jsxs)("div",{className:"flex items-center text-green-400",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full mr-2"}),"Compliant"]})]}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:"Sulfur content below 0.50% limit"})]}),(0,a.jsxs)("div",{className:"bg-slate-700 rounded-lg p-4 border border-slate-600",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h4",{className:"font-semibold text-white",children:"Norwegian Waters"}),(0,a.jsxs)("div",{className:"flex items-center text-yellow-400",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-yellow-400 rounded-full mr-2"}),"Monitoring"]})]}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:"Approaching protected fjord waters"})]})]})]}),(0,a.jsxs)("div",{className:"dashboard-card",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-6",children:"Automated Environmental Actions"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-start p-4 bg-green-500/10 border border-green-500/20 rounded-lg",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full mt-2 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-green-400 font-medium",children:"Battery Mode Activated"}),(0,a.jsx)("p",{className:"text-slate-400 text-sm",children:"Switched to electric propulsion in Geirangerfjord protected area"}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"2 minutes ago"})]})]}),(0,a.jsxs)("div",{className:"flex items-start p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-400 rounded-full mt-2 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-blue-400 font-medium",children:"Compliance Report Submitted"}),(0,a.jsx)("p",{className:"text-slate-400 text-sm",children:"Daily emissions report sent to Norwegian Maritime Authority"}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"1 hour ago"})]})]}),(0,a.jsxs)("div",{className:"flex items-start p-4 bg-yellow-500/10 border border-yellow-500/20 rounded-lg",children:[(0,a.jsx)(m.Z,{className:"h-5 w-5 text-yellow-400 mt-0.5 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-yellow-400 font-medium",children:"Route Optimization Suggested"}),(0,a.jsx)("p",{className:"text-slate-400 text-sm",children:"Alternative route available to reduce emissions by 8%"}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"15 minutes ago"})]})]})]})]})]})}var E=t(2652);function RouteOptimization(){return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsx)("div",{className:"metric-card",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(r.Z,{className:"h-8 w-8 text-blue-500 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-white",children:"34"}),(0,a.jsx)("p",{className:"text-slate-400",children:"Active Ports"})]})]})}),(0,a.jsx)("div",{className:"metric-card",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(E.Z,{className:"h-8 w-8 text-green-500 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-white",children:"2,518"}),(0,a.jsx)("p",{className:"text-slate-400",children:"Nautical Miles"})]})]})}),(0,a.jsx)("div",{className:"metric-card",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(h.Z,{className:"h-8 w-8 text-yellow-500 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-white",children:"13.5h"}),(0,a.jsx)("p",{className:"text-slate-400",children:"Avg Optimization"})]})]})}),(0,a.jsx)("div",{className:"metric-card",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(x.Z,{className:"h-8 w-8 text-purple-500 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-white",children:"18%"}),(0,a.jsx)("p",{className:"text-slate-400",children:"Fuel Efficiency"})]})]})})]}),(0,a.jsxs)("div",{className:"dashboard-card",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-white mb-6",children:"Route Optimization"}),(0,a.jsx)("div",{className:"space-y-4",children:[{id:1,name:"Bergen-Kirkenes Northbound",status:"Active",efficiency:92,estimatedTime:"6d 15h",fuelSaving:"15%",ports:["Bergen","\xc5lesund","Geiranger","Trondheim","Bod\xf8","Troms\xf8","Kirkenes"]},{id:2,name:"Kirkenes-Bergen Southbound",status:"Planned",efficiency:88,estimatedTime:"6d 12h",fuelSaving:"12%",ports:["Kirkenes","Troms\xf8","Bod\xf8","Trondheim","Geiranger","\xc5lesund","Bergen"]}].map(e=>(0,a.jsxs)("div",{className:"bg-slate-700 rounded-lg p-6 border border-slate-600",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center mt-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full mr-2 ".concat("Active"===e.status?"bg-green-500":"bg-yellow-500")}),(0,a.jsx)("span",{className:"text-sm text-slate-300",children:e.status})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"text-2xl font-bold text-white",children:[e.efficiency,"%"]}),(0,a.jsx)("p",{className:"text-slate-400 text-sm",children:"Efficiency"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-slate-400 text-sm",children:"Estimated Time"}),(0,a.jsx)("p",{className:"text-white font-semibold",children:e.estimatedTime})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-slate-400 text-sm",children:"Fuel Saving"}),(0,a.jsx)("p",{className:"text-green-400 font-semibold",children:e.fuelSaving})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-slate-400 text-sm",children:"Ports"}),(0,a.jsxs)("p",{className:"text-white font-semibold",children:[e.ports.length," stops"]})]})]}),(0,a.jsxs)("div",{className:"border-t border-slate-600 pt-4",children:[(0,a.jsx)("p",{className:"text-slate-400 text-sm mb-2",children:"Route Ports:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:e.ports.map((e,s)=>(0,a.jsx)("span",{className:"px-3 py-1 bg-slate-600 rounded-full text-xs text-white",children:e},s))})]})]},e.id))})]}),(0,a.jsxs)("div",{className:"dashboard-card",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-6",children:"AI Route Recommendations"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-start p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-400 rounded-full mt-2 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-blue-400 font-medium",children:"Weather Optimization Available"}),(0,a.jsx)("p",{className:"text-slate-400 text-sm",children:"Alternative route through Lofoten can save 2.5 hours due to favorable winds"}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"Recommended for Havila Capella - departing in 4 hours"})]})]}),(0,a.jsxs)("div",{className:"flex items-start p-4 bg-green-500/10 border border-green-500/20 rounded-lg",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full mt-2 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-green-400 font-medium",children:"Fuel Efficiency Improvement"}),(0,a.jsx)("p",{className:"text-slate-400 text-sm",children:"Speed reduction by 2 knots in open waters can improve fuel efficiency by 8%"}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"Applied to all vessels automatically"})]})]}),(0,a.jsxs)("div",{className:"flex items-start p-4 bg-purple-500/10 border border-purple-500/20 rounded-lg",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-purple-400 rounded-full mt-2 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-purple-400 font-medium",children:"Northern Lights Route"}),(0,a.jsx)("p",{className:"text-slate-400 text-sm",children:"Clear skies predicted for Troms\xf8-Kirkenes segment - optimal for aurora viewing"}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"Passenger notification sent to 342 guests"})]})]})]})]}),(0,a.jsxs)("div",{className:"dashboard-card",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-6",children:"Live Route Tracking"}),(0,a.jsx)("div",{className:"bg-slate-800 rounded-lg h-96 flex items-center justify-center border border-slate-600",children:(0,a.jsxs)("div",{className:"text-center text-slate-400",children:[(0,a.jsx)(r.Z,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),(0,a.jsx)("p",{className:"text-lg",children:"Interactive Route Map"}),(0,a.jsx)("p",{className:"text-sm mt-2",children:"Real-time vessel positions and route optimization"}),(0,a.jsx)("p",{className:"text-xs mt-1",children:"Norwegian Coastal Route: Bergen â†” Kirkenes"})]})})]}),(0,a.jsxs)("div",{className:"dashboard-card",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-6",children:"Route Performance Metrics"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"bg-slate-700 rounded-lg p-4 text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-white",children:"98.2%"}),(0,a.jsx)("p",{className:"text-slate-400 text-sm",children:"On-time Arrivals"})]}),(0,a.jsxs)("div",{className:"bg-slate-700 rounded-lg p-4 text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-white",children:"4.6"}),(0,a.jsx)("p",{className:"text-slate-400 text-sm",children:"Avg Delay (min)"})]}),(0,a.jsxs)("div",{className:"bg-slate-700 rounded-lg p-4 text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-white",children:"15.3%"}),(0,a.jsx)("p",{className:"text-slate-400 text-sm",children:"Fuel Savings"})]}),(0,a.jsxs)("div",{className:"bg-slate-700 rounded-lg p-4 text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-white",children:"4.8/5"}),(0,a.jsx)("p",{className:"text-slate-400 text-sm",children:"Passenger Rating"})]})]})]})]})}var M=t(4672),R=t(6888),C=t(6108);function RealTimeVisualization(e){let{dataTypes:s,title:t,refreshInterval:i=5e3}=e,[r,c]=(0,l.useState)(null),[o,m]=(0,l.useState)([]),[h,j]=(0,l.useState)(!0),{data:p,isConnected:f}=useRealTimeData(s),g=(0,l.useRef)(null);(0,l.useEffect)(()=>{p.size>0&&(p.forEach((e,s)=>{e.forEach(e=>u.processRealTimeData(e))}),updateAnalytics())},[p]),(0,l.useEffect)(()=>{let e=setInterval(updateAnalytics,i);return()=>clearInterval(e)},[i]);let updateAnalytics=async()=>{try{let e=await u.getAnalytics(s);c(e);let t=u.getTimeSeriesData(s[0],2),a=t.map((s,a)=>({time:new Date(s.timestamp).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),value:s.value,prediction:a>=t.length-12?e.predictions.fuelConsumption[a-(t.length-12)]:void 0}));m(a),j(!1)}catch(e){console.error("Failed to update analytics:",e),j(!1)}},getTrendIcon=e=>{switch(e){case"up":return(0,a.jsx)(x.Z,{className:"w-4 h-4 text-green-500"});case"down":return(0,a.jsx)(M.Z,{className:"w-4 h-4 text-red-500"});default:return(0,a.jsx)(d.Z,{className:"w-4 h-4 text-blue-500"})}},getTrendColor=e=>{switch(e){case"up":return"text-green-600";case"down":return"text-red-600";default:return"text-blue-600"}};return h?(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),(0,a.jsx)("div",{className:"h-64 bg-gray-200 rounded"})]})}):(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(d.Z,{className:"w-6 h-6 text-blue-600"}),(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:t}),(0,a.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(f?"bg-green-500":"bg-red-500")})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["Live â€¢ Updated ",new Date().toLocaleTimeString()]})]}),r&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-blue-600 font-medium",children:"Fuel Efficiency"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-blue-700",children:[r.kpis.fuelEfficiency.toFixed(1),"%"]})]}),(0,a.jsx)(n.Z,{className:"w-8 h-8 text-blue-500"})]})}),(0,a.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-green-600 font-medium",children:"Emission Reduction"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-green-700",children:[r.kpis.emissionReduction.toFixed(1),"%"]})]}),(0,a.jsx)(M.Z,{className:"w-8 h-8 text-green-500"})]})}),(0,a.jsx)("div",{className:"bg-gradient-to-r from-purple-50 to-purple-100 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-purple-600 font-medium",children:"On-Time Performance"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-purple-700",children:[r.kpis.onTimePerformance.toFixed(1),"%"]})]}),(0,a.jsx)(d.Z,{className:"w-8 h-8 text-purple-500"})]})}),(0,a.jsx)("div",{className:"bg-gradient-to-r from-orange-50 to-orange-100 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-orange-600 font-medium",children:"Satisfaction"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-orange-700",children:[r.kpis.passengerSatisfaction.toFixed(1),"%"]})]}),(0,a.jsx)(x.Z,{className:"w-8 h-8 text-orange-500"})]})})]}),(0,a.jsxs)("div",{className:"mb-6",ref:g,children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-700 mb-3",children:"Real-time Data Stream"}),(0,a.jsx)("div",{className:"h-80",children:(0,a.jsx)(v.h,{width:"100%",height:"100%",children:(0,a.jsxs)(R.T,{data:o,children:[(0,a.jsx)(b.q,{strokeDasharray:"3 3"}),(0,a.jsx)(w.K,{dataKey:"time"}),(0,a.jsx)(y.B,{}),(0,a.jsx)(S.u,{}),(0,a.jsx)(C.u,{type:"monotone",dataKey:"value",stroke:"#3B82F6",fill:"#3B82F6",fillOpacity:.3,strokeWidth:2}),(0,a.jsx)(T.x,{type:"monotone",dataKey:"prediction",stroke:"#EF4444",strokeDasharray:"5 5",strokeWidth:2,dot:!1})]})})})]}),(null==r?void 0:r.trends)&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-700 mb-3",children:"Trend Analysis"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:r.trends.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[getTrendIcon(e.trend),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-700",children:e.name}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:e.value.toFixed(1)})]})]}),(0,a.jsxs)("div",{className:"text-right ".concat(getTrendColor(e.trend)),children:[(0,a.jsxs)("p",{className:"text-sm font-medium",children:[e.change>0?"+":"",e.change,"%"]}),(0,a.jsx)("p",{className:"text-xs capitalize",children:e.trend})]})]},s))})]})]})}function Home(){let[e,s]=(0,l.useState)("fleet"),[t,x]=(0,l.useState)(null),[h,u]=(0,l.useState)(!0);(0,l.useEffect)(()=>{fetchSystemStatus();let e=setInterval(fetchSystemStatus,3e4);return()=>clearInterval(e)},[]);let fetchSystemStatus=async()=>{try{let e=await fetch("".concat("https://maritime-platform.icystone-47eb4b00.norwayeast.azurecontainerapps.io","/api/monitoring/health")),s=await e.json();x(s),u(!1)}catch(e){console.error("Failed to fetch system status:",e),u(!1)}},j=[{id:"fleet",name:"Fleet Management",icon:i.Z},{id:"realtime",name:"Real-time Analytics",icon:n.Z},{id:"routes",name:"Route Optimization",icon:r.Z},{id:"environment",name:"Environmental",icon:c.Z},{id:"system",name:"System Health",icon:d.Z}];return h?(0,a.jsx)("div",{className:"min-h-screen bg-maritime-dark flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-havila-blue mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Loading Maritime Platform..."})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-maritime-dark",children:[(0,a.jsx)("header",{className:"bg-havila-blue shadow-lg",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(i.Z,{className:"h-8 w-8 text-havila-gold mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Havila Kystruten"}),(0,a.jsx)("p",{className:"text-blue-200",children:"Maritime Operations Platform"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(null==t?void 0:t.overallStatus)==="Healthy"?(0,a.jsx)(o.Z,{className:"h-5 w-5 text-green-400 mr-2"}):(0,a.jsx)(m.Z,{className:"h-5 w-5 text-yellow-400 mr-2"}),(0,a.jsxs)("span",{className:"text-white font-medium",children:["System ",(null==t?void 0:t.overallStatus)||"Unknown"]})]}),(0,a.jsxs)("div",{className:"text-sm text-blue-200",children:["Last updated: ",new Date().toLocaleTimeString()]})]})]})})}),(0,a.jsx)("nav",{className:"bg-slate-800 border-b border-slate-700",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsx)("div",{className:"flex space-x-8",children:j.map(t=>{let l=t.icon;return(0,a.jsxs)("button",{onClick:()=>s(t.id),className:"flex items-center px-3 py-4 text-sm font-medium border-b-2 transition-colors ".concat(e===t.id?"border-havila-blue text-havila-blue":"border-transparent text-slate-300 hover:text-white hover:border-slate-300"),children:[(0,a.jsx)(l,{className:"h-4 w-4 mr-2"}),t.name]},t.id)})})})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:["fleet"===e&&(0,a.jsx)(FleetDashboard,{}),"realtime"===e&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(RealTimeVisualization,{dataTypes:["vessel","ais"],title:"Fleet Performance Analytics",refreshInterval:5e3}),(0,a.jsx)(RealTimeVisualization,{dataTypes:["environmental"],title:"Environmental Compliance Monitoring",refreshInterval:1e4}),(0,a.jsx)(RealTimeVisualization,{dataTypes:["route","optimization"],title:"Route Optimization Insights",refreshInterval:15e3})]}),"routes"===e&&(0,a.jsx)(RouteOptimization,{}),"environment"===e&&(0,a.jsx)(EnvironmentalMonitoring,{}),"system"===e&&(0,a.jsx)(SystemHealth,{systemStatus:t})]}),(0,a.jsx)("footer",{className:"bg-slate-900 border-t border-slate-700 mt-12",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("div",{className:"text-slate-400",children:"\xa9 2025 Havila Kystruten. Maritime Platform v2.0.0"}),(0,a.jsxs)("div",{className:"flex items-center text-slate-400",children:[(0,a.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Bergen-Kirkenes Coastal Route"]})]})})})]})}}},function(e){e.O(0,[577,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);